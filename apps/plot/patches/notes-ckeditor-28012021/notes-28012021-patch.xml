<?xml version="1.0" encoding="UTF-8" ?>
<!-- This is a WordPress eXtended RSS file generated by WordPress as an export of your site. -->
<!-- It contains information about your site's posts, pages, comments, categories, and other content. -->
<!-- You may use this file to transfer that content from one site to another. -->
<!-- This file is not intended to serve as a complete backup of your site. -->

<!-- To import this information into a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Go to Tools: Import in the WordPress admin panel. -->
<!-- 3. Install the "WordPress" importer from the list. -->
<!-- 4. Activate & Run Importer. -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. You will first be asked to map the authors in this export file to users -->
<!--    on the site. For each author, you may choose to map to an -->
<!--    existing user on the site or to create a new user. -->
<!-- 7. WordPress will then import each of the posts, pages, comments, categories, etc. -->
<!--    contained in this file into your site. -->

	
<rss version="2.0"
	xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:wp="http://wordpress.org/export/1.2/"
>

<channel>
	<title>nxt.wpoets.com</title>
	<link>http://nxt.wpoets.com</link>
	<description></description>
	<pubDate>Wed, 06 Jan 2021 10:40:36 +0000</pubDate>
	<language>en-US</language>
	<wp:wxr_version>1.2</wp:wxr_version>
	<wp:base_site_url>http://nxt.wpoets.com</wp:base_site_url>
	<wp:base_blog_url>http://nxt.wpoets.com</wp:base_blog_url>

		<wp:author><wp:author_id>1</wp:author_id><wp:author_login><![CDATA[Amit]]></wp:author_login><wp:author_email><![CDATA[amit@wpoets.com]]></wp:author_email><wp:author_display_name><![CDATA[Amit]]></wp:author_display_name><wp:author_first_name><![CDATA[]]></wp:author_first_name><wp:author_last_name><![CDATA[]]></wp:author_last_name></wp:author>
		<item>
		<title>trumbowyg_editor</title>
		<link>https://wpoets.com/?post_type=form_control&#038;p=854990</link>
		<pubDate>Wed, 16 Oct 2019 06:46:53 +0000</pubDate>
		<dc:creator><![CDATA[sapna]]></dc:creator>
		<guid isPermaLink="false">http://nxt.wpoets.com/?post_type=form_control&#038;p=854990</guid>
		<description></description>
		<content:encoded><![CDATA[<script type="spa/axn" axn=core.run_script> 
    spa.trumbowyg = {};
  spa.trumbowyg.prerequisites = {};
  spa.trumbowyg.prerequisites.js_files = 'https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/trumbowyg.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/upload/trumbowyg.upload.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/table/trumbowyg.table.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/history/trumbowyg.history.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/fontsize/trumbowyg.fontsize.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/colors/trumbowyg.colors.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/cleanpaste/trumbowyg.cleanpaste.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/template/trumbowyg.template.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/indent/trumbowyg.indent.min.js,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/preformatted/trumbowyg.preformatted.min.js';
  spa.trumbowyg.prerequisites.css_files = 'https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/ui/trumbowyg.min.css,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/table/ui/trumbowyg.table.min.css,https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/plugins/colors/ui/trumbowyg.colors.min.css';

  spa.trumbowyg.init = function(o) {}
  spa.trumbowyg.run = function(o) {
  		//alert("als");
      var editor = o.el.attr('editor');
      var upload_path = o.el.attr('upload_url');

      $.trumbowyg.svgPath = 'https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.23.0/ui/icons.svg';
     var t =  $(editor).trumbowyg({
          btnsDef: {
              // Create a new dropdown 
              image: {
                  dropdown: ['insertImage', 'upload'],
                  ico: 'insertImage'
              }
          },
          btns: [
              ['strong', 'em', 'del'],
  						['unorderedList', 'orderedList'],
              ['indent', 'outdent'],
              ['link'],
              ['image'],
              ['table'],
              ['justifyLeft', 'justifyCenter', 'justifyRight'],
              ['formatting'],
              ['superscript', 'subscript'],
              ['foreColor', 'backColor'],
              ['horizontalRule'],
              ['undo', 'redo'], // Only supported in Blink browsers 
              ['viewHTML'],
              ['removeformat'],
              ['fullscreen']
          ],
          plugins: {
              // Add imagur parameters to upload plugin for demo purposes 
              upload: {
                  serverPath: upload_path,
                  fileFieldName: 'image_file',
                  urlPropertyName: 'url',
                  error: function() {
                      alert("Error!");
                  }
              }
          },
          autogrow: true
      }).on('tbwchange', function(){
      		$("#[module.get textarea_name /]").empty().html($(editor).trumbowyg('html'));
      		//console.log($(this).val());
        });
        [aw2.get token set='template.editor_token' /]
      	$(editor).trumbowyg('html', $(".[template.editor_token /]").html());
  }

</script>
<div class="form-group row">
<label for="[module.get id /]">[module.get label /][if.equal lhs="{module.required}" rhs="yes"]<span class='text-danger'>*</span>[/if.equal]</label>
<div class="[template.editor_token /]" placeholder="[module.get placeholder /]">[module.get content /]</div> 
<script type="spa/axn" axn='trumbowyg.run' editor=".[template.editor_token /]" upload_url='[aw2.get app.path]/modules/upload-images'></script>
  
	<textarea name="[module.get textarea_name /]" 
  					id="[module.get textarea_name /]" 
            [if.equal lhs="{module.required}" rhs="yes"]required[/if.equal]
            msg-required="<i class='icon icon-warning'></i> [module.get label /] is required!"
            style="display:none;"></textarea>
    <i class="info-block">[module.get help-block /]</i>
	<div class="help-block"></div>        
</div>]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>854990</wp:post_id>
		<wp:post_date><![CDATA[2019-10-16 06:46:53]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2019-10-16 06:46:53]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[trumbowyg_editor]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[form_control]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							</item>
				
	<item>
		<title>note</title>
		<link>https://wpoets.com/?post_type=m_plot&#038;p=860501</link>
		<pubDate>Sat, 26 Oct 2019 11:37:44 +0000</pubDate>
		<dc:creator><![CDATA[Amit]]></dc:creator>
		<guid isPermaLink="false">http://nxt.wpoets.com/?post_type=m_plot&#038;p=858287</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
[css.style]
    .filter-icon {
        display: none !important;
    }
    .document-editor{
    	max-height: 500px;
   		display: flex;
    	flex-flow: column nowrap;
    }
      
   .document-editor__editable-container {
       overflow-y: scroll;
    } 

    .document-editor__toolbar{
    	top:0;
    }
    body .body-content-wrapper{
    	padding-top:15px;
    	padding-bottom:10px;
    }
    form.add-new-tag {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 9999;
    }
	.ck-content .image>figcaption {
       min-height: 30px;
    }
    
    .ck-content h1{
		padding-bottom: .2em;
		border-bottom: 1px solid #e9e9e9;
    }
[/css.style]
 
  [template.set note_id = {qs.0} /]
  [plot.note.single note_id="{template.note_id}" o.set="template.note_meta" not_empty='{qs.0}' /]

  [if.empty template.note_meta]
  	[template.set error]
    	<h1 class='mar-t-10 text-center brand-warning'>Note does not exists.</h1>
    [/template.set]
    [template.return template.error /]
  [/if.empty]
  
  //** initialize heartbeat **//
  [plot.heartbeat.create_heartbeat token='note_{template.note_id}' set='module.heartbeatRes' /]
   [env.set app.page_title="{template.note_meta.note_title} - Plot" /]
  
  <div class="body-content-wrapper" id='note_[template.note_id /]'>
    <div class="is-flex justify-content-between">
    		<div class="breadcrumb">
        [template.set_array crumbs.new title='Dashboard' url="{app.path /}/" route_ajax='home'/]
        [template.set_array crumbs.new title='Notes' url='{app.path}/notes' route_ajax='notes'/]
        [template.set_array crumbs.new title='{template.note_meta.note_title}' url='' /]
        [plot.card.breadcrumbs crumbs="{template.crumbs}"/]
        </div>
       	<div class="pad-x-4">                  
              <div class="is-none is-md-flex align-items-center mar-b-4">
                  <span class="font-bold font-size-smaller pad-x-4">
                    User Story: <a href='[env.get app.path /]/user-story/[template.note_meta.user_story_id /]' class="font-light brand-fourth is-inline-block" target='_blank' rel="noopener noreferrer">[template.note_meta.user_story_title /]</a>
                  </span>
                  <span class="no-margin font-bold font-size-smaller">
                    Task: <a href='[env.get app.path /]/task/[template.note_meta.task_id /]' class="font-light brand-fourth is-inline-block" target='_blank' rel="noopener noreferrer">[template.note_meta.task_title /]</a>
                  </span>
              </div>
        </div>
      </div>
    <section roll="notes-single" class="notes-single">
      <div class="row">
        <div class="col-12">
          <div class="brand-white-bg simple-box-shadow">
            <div>
              <div class="">
                <div class="document-editor">
                  <div class="document-editor__toolbar"></div>
                  <div class="document-editor__editable-container invisible">
                      <div class="document-editor__editable">
                      	[template.note_meta.note_content  /]
                      </div>
                  </div>
                </div>
                  
                  <script type="spa/axn" axn='ckeditor5.run' editor='.document-editor__editable' toolbar='.document-editor__toolbar' upload_url='[aw2.get app.path]/[module.slug /].upload-images?note_id=[template.note_id /]' note_title='[template.note_meta.note_title /]' save_callback='spa.noteEditor.save'></script>
              </div>
               <div class="justify-content-between br-top font-size-smallest row pad-x-6 tags no-margin">
                  <div class="order-1 order-md-0 col-md-6 no-padding">
                  	[loop.@t template.note_meta.tags_label.comma]
                      <span class="br br-5 pad-x-2 pad-y-1 gray mar-b-1 mar-t-1 is-inline-block mar-x-1">[aw2.get @t.item /]</span>
                    [/loop.@t]
                    <span class="br br-5 pad-x-2 pad-y-1 gray mar-b-1 mar-t-1 is-inline-block add-tag pointer ">+</span>
                  </div>
                  <div class="col-md-6 no-padding align-items-center is-flex justify-content-between justify-content-md-end is-relative mar-t-1">    
                  		 <div class="pad-x-2">
                           <div class="font-size-smallest">
                              <span class="brand-info-bg brand-white notes-status inline pad-x-2 text-uppercase status-[template.note_meta.note_type /]">[template.note_meta.note_type /]</span>
                       		</div>    
                      </div>
                      <div class="actions">
                          <span class="editor-save mar-x-2" title='save'>[plot.icon.save color="gray" /]</span>
                          <div class="loader-save" style="display:none;"></div> 
                      </div>
                  </div>
                </div>
                <form class="add-new-tag row align-items-center justify-content-center no-margin is-none">
                  <div class="col-md-6 col-xl-4 brand-white-bg mar-t-4 mar-x-4 pad-6">
                  	<i class="icon-close add-tag pointer" style=" position: absolute; top: 0; right: 0; padding: 3px;"></i>
                    <div class="gap-4"></div>
                    <div class="form-group">
                      <input name="new_tag" type="text" placeholder="Add Tag" class="form-control" required>
                    </div>
                    <div class="text-right">
                    	<button type="submit" id="add-tag" value="" class="btn btn-primary">Add Tag</button>
                    </div>
                  </div>
                  <div class="gap-5"></div>
                </form>
                <script type=spa/axn
                    axn='form.ajax'
                    bind='submit'
                    note_id='[template.note_id /]'
                    bind_selector="form.add-new-tag"
                    disable_selector=".add_tag"
                    route_ajax='[module.slug /].add_tag'>
                </script>
            </div>
         </div>
        </div>
       </div>
    </section>
  </div>
  
  [session_ticket.create {token} nonce="yes" set=module.save_form time=300 /]
  [session_ticket.set_activity {module.save_form} app='{app.slug}' module='{module.slug}.update_note_content' /]
  [session_ticket.set {module.save_form} field='update_note_id' value='{template.note_meta.note_id}' /]
  <script type="spa/axn" axn="core.run_script">
   
  var tags = jQuery('.tags').height();
  var header = jQuery('.header').height();
  var doc_height = jQuery(window).height();
  var max_height = doc_height - tags -header -65;
  jQuery('.document-editor').css('max-height',max_height+'px');
   
   $('.add-tag').click(function(){
      $('.add-new-tag').toggleClass('is-none');
    });
    
    $('.document-editor').bind('keydown', function(event) {
      if (event.ctrlKey || event.metaKey) {
          switch (String.fromCharCode(event.which).toLowerCase()) {
          case 's':
              event.preventDefault();
              $('.editor-save').click();
              break;
          }
      }
    });
	
    spa.noteEditor={};
    spa.noteEditor.isReadOnly = false;
    spa.noteEditor.save = function(){
      if(spa.noteEditor.isReadOnly)
          return false;

        spa.isAnyTaskInProgress = true;
        $('.loader-save').show();
        return spa.route.run({
          route_ajax: 't/[module.save_form /]',
          block:{
            params:{
              content: spa.ckeditor5.editor.getData() || ''
            }
          }
        }).then(function(){
          $('.loader-save').hide();
          spa.isAnyTaskInProgress = false;
        });
    
    }
    
    [if.not_equal lhs='{module.heartbeatRes.status}' rhs='error']
      $('.editor-save').click(function(){
      		spa.noteEditor.save();
      });
    [/if.not_equal]
      
    $('.editor-text-formatting').click(function(){
    	$('.document-editor__toolbar').toggleClass('invisible');
      $(this).toggleClass('active-toolbar');
    });
    
    window.onbeforeunload = confirmExit;
    function confirmExit() {
        if (spa.isAnyTaskInProgress) {
           return "Some task is in progress. Are you sure, you want to close?";
        }
    }
    
    $('.document-editor__editable-container').removeClass('invisible');
    
    
    //** below script is for notes single user access at a time functionality **//
    function noteOverrided(res){
      spa.noteEditor.isReadOnly = true;
      spa.notifications.alert({
      	alert: res['data']['user_name'] + ' has taken over and is currently editing. Your latest changes can not be saved.'
      });
    }
    
    function noteEditOnly(){
      spa.noteEditor.isReadOnly = true;
    }
    
    function getTicketResponse(str) {
      try {
        str = JSON.parse(str);
      } catch (e) {
        return false;
      }
      	return str;
    }
    var heartBeatFn = setInterval(function(){
    	if($('#note_[template.note_id /]').length == 0){
      	clearInterval(heartBeatFn);
      	return false;
      }
      
      $.ajax({
        url: '[app.path /]/t/note_[template.note_id /]'
      }).then(function(res){
        res = getTicketResponse(res);
        if(false == res){
          spa.route.run({route_ajax:'note.heartbeat?token=note_[template.note_id /]'});
        }else if('error' == res['status'] ){
          noteOverrided(res);
          clearInterval(heartBeatFn);
        }
      });
    },15000);
    
    if( '[module.heartbeatRes.status /]' == 'error' ){
    	noteEditOnly();
      clearInterval(heartBeatFn);
    }
  </script>
  
  [if.equal lhs='{module.heartbeatRes.status}' rhs='error']
  	<script type="spa/axn" axn="core.run_script" alert='[module.get heartbeatRes.data.user_name /] is already editing this Note. Opening note in read only mode.'></script>
  [/if.equal]
  <script type="spa/axn" axn="notifications.alert"></script>
  //** Notes single End Here **//
[/templates.add]

[templates.add update_note_content]
	[php.stripslashes p1={request.content} o.set=template.content /]
  [template.set_array meta.new meta_key='note_content' meta_value='{template.content}' coll_type='note' /]
  [plot.note.update meta='{template.meta}' note_id='{template.update_note_id}' /]
   //** Activity log **//
  [template.set metas_act.activity_note="Note (<a href='{app.path}/note/{template.update_note_id}'>{template.update_note_id}</a>) was updated." /]
  [plot.activity.log object_id="{template.update_note_id}" coll_type="note" metas="{template.metas_act}" set="template.activity" /]
	
[/templates.add]

[templates.add upload-images]
	[date.create now date_format='Y-m-d_H-i-s' set=template.current_dt /]
  
  [aw2.upload upload_to_path
      upload_element_id='upload'
      file_name='file_{template.current_dt}'
      dir_name='{app.slug}-docs/notes/{request.note_id}/'
      overwrite_file='no'
	    allowed_file_types="gif,png,jpg,jpeg,pdf,doc,docx,txt,xls,xlsx,xlsm,csv,zip,svg,tar,tar.gz,gz,ppt,psd,ai,rar,7z,ttf,xd,cdr"
      set='template.file_response'
    /]
    [if.not_empty template.file_response.filename]
      {
      	"url":"[app.path /]/file/?filename=notes/[request.note_id /]/[template.file_response.filename /]"
      }
    [/if.not_empty]
[/templates.add]

[templates.add add_tag]
  [db.meta.select_meta_key_value_pair meta_table="plot" coll_id="{request.note_id}" set="template.note_meta" not_empty='{request.note_id}' /]

	[php.wp_insert_term p1='{request.new_tag}' p2='task_tag' set='template.res' /]
  [if.not_empty template.res.term_id]
  	[query.get_term_by taxonomy='task_tag' field='term_id' value='{template.res.term_id}' set=template.new_term /]
  [/if.not_empty]
  [if.else]
  	[query.get_term_by taxonomy='task_tag' field='name' value='{request.new_tag}' set=template.new_term /]
  [/if.else]
  [template.new_term.name set='template.tag_name' /]
  [template.new_term.slug set='template.tag_slug' /]
  
  [if.not_empty template.note_meta.tags]
    [template.set_array meta.new meta_key='tags' meta_value='{template.note_meta.tags},{template.tag_slug}' coll_type='note' /]
    [template.set_array meta.new meta_key='tags_label' meta_value='{template.note_meta.tags_label},{template.tag_name}' coll_type='note' /]
  [/if.not_empty]
  [if.else]
    [template.set_array meta.new meta_key='tags' meta_value='{template.tag_slug}' coll_type='note' /]
    [template.set_array meta.new meta_key='tags_label' meta_value='{template.tag_name}' coll_type='note' /]
  [/if.else]
  
  [plot.note.update meta='{template.meta}' note_id='{request.note_id}' /]
  
  <script type="spa/axn" axn=page.update route_ajax='note/[request.get note_id /]'></script>
[/templates.add]
[templates.add heartbeat]
	  [plot.heartbeat.create_heartbeat token='{request.token}' o.set='module.heartbeatRes' not_empty='{request.token}' /]
    [module.get heartbeatRes /]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>860501</wp:post_id>
		<wp:post_date><![CDATA[2019-10-26 11:37:44]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2019-10-26 11:37:44]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[note]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_plot]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[5]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[5]]></wp:meta_value>
		</wp:postmeta>
							</item>
					
</channel>
</rss>
	